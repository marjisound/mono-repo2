import path from 'path';
import fs from 'fs';
import express from 'express';
import compression from 'compression';

import React from 'react';
import { renderToString } from 'react-dom/server';

import Article from './dist/Article';

const app = express();

app.use(express.json({ limit: '50mb' }));
app.use("/public", express.static(path.resolve(__dirname, 'public')));
app.use(compression());

const capiFields = {
  "headline": "Venezuelan leader Nicolás Maduro confirms months of secret US talks",
  "standfirst": "<p>‘Various contacts’ made, says embattled president, amid reports he is negotiating a way to stand down </p>",
  "byline": "Tom Phillips Latin America correspondent",
  // "body": "<p>Nicolás Maduro has confirmed top Venezuelan officials have been talking to members of Donald Trump’s White House, after reports his second-in-command had been negotiating his downfall with the United States.</p> <p>“I confirm that for months there have been contacts between senior officials from Donald Trump’s government and from the Bolivarian government over which I preside – with my express and direct permission,” Venezuela’s authoritarian leader said in <a href=\"https://twitter.com/VTVcanal8/status/1163961687399182336?s=20\">a televised address</a> on Tuesday night.</p> <p>“Various contacts through various channels,” Maduro added.</p> <p>Maduro’s remarks came after two reports in the US media claimed Diosdado Cabello, one of Venezuela’s most powerful and feared men, had been engaged in <a href=\"https://www.apnews.com/a3e6b0da8c5648558e61bbaa466fbb42\">“secret communications”</a> with Trump officials.</p> <p>On Sunday <a href=\"https://www.axios.com/scoop-inside-trumps-naval-blockade-obsession-555166b0-06f9-494c-b9fb-9577a589e2ac.html\">Axios claimed</a> that in recent months Cabello, the 56-year-old head of Venezuela’s pro-Maduro constituent assembly, had been communicating with Trump’s top Latin America adviser, Mauricio Claver-Carone. Some Trump officials reportedly considered that a positive sign suggesting Maduro’s circle was “gradually cracking”.</p> <p>The Associated Press claimed Cabello had met someone “in close contact with the Trump administration” in Caracas last month and that a second meeting was envisioned. The US reportedly hoped engaging with Cabello would intensify an internal “knife fight” supposedly raging at the pinnacle of Maduro’s administration.</p> <p>Observers of Venezuelan politics greeted those reports – apparently designed to destablise Maduro’s crisis-stricken administration by stoking paranoia within his inner-circle - with scepticism.</p> <p>Christopher Sabatini, a senior fellow for Latin America at the Chatham House thinktank, said: “I think what the US is trying to do is some sort of psy ops thing<em>,</em> trying to rattle people within Maduro’s administration.”</p> <p>But on Tuesday Maduro confirmed contact with the US, which he painted as proof that he had been seeking ways “for president Donald Trump to truly listen to Venezuela and the truth of the 21st century Bolivarian revolution”.</p> <p>Earlier in the day Trump told reporters: “We’re talking to various representatives of Venezuela. I don’t want to say who, but we are talking at a very high level.”</p> <p>Geoff Ramsey, a Venezuela expert at the Washington Office on Latin America, described reports there had been talks between Cabello and Trump officials as “a very positive sign”.</p> <p>“It suggests an understanding at the top level of [Maduro’s] government that this is unsustainable,” he said of Venezuela’s ongoing economic, political and <a href=\"https://www.ft.com/content/b6459434-b531-11e9-8cb2-799a3a8cf37b\">humanitarian meltdown</a>.</p> <p>“I think what these people are looking for is some kind of guarantee [from the US] that they are not going to end up in a jail cell in Miami,” Ramsey added.</p> <p>Maduro has been fighting for his political life since January when a young opposition leader, Juan Guaidó, declared himself Venezuela’s rightful president and received the backing of more than 50 governments, including the US and UK.</p> <p>More than four million Venezuelans have now fled their oil-rich but economically devastated nation, <a href=\"https://www.theguardian.com/world/2019/jun/07/venezuela-exodus-4-million-un-refugee-agency\">according to the UN’s refugee agency</a>, with at least 1 million people leaving since last November alone.</p>",
  //"body": "<p>Amid the myriad joyful images on social media, showing ecstatic pupils and their teachers celebrating <a href=\"https://www.theguardian.com/education/2019/aug/22/gcse-results-more-rigorous-courses-appear-to-benefit-girls\">GCSE results</a>, one particular success story stood out.</p> <p>Michaela community school, a controversial free school known for its strict behaviour policy, picked up its first set of GCSE results on Thursday, five years after opening its doors to its first pupils.</p> <p>“Michaela pupils SMASH it,” <a href=\"https://twitter.com/Miss_Snuffy/status/1164464651054329857?s=20\">tweeted</a> the headteacher, Katharine Birbalsingh. Her colleagues were similarly delighted. “I’m so proud to be a Michaela teacher today,” <a href=\"https://twitter.com/tkendalluk/status/1164471970949410816?s=20\">tweeted</a> the maths teacher Thomas Kendall. “It feels like winning the league. The kids deserve it so much for all their hard work.”</p> <p>Compared with other non-selective state schools, Michaela’s results rank among the best in the country. More than half (54%) of all grades were level 7 or above (equivalent to the old-style A and A*), which was more than twice the national average of 22%. Nearly one in five (18%) of all grades were 9s, compared with 4.5% nationally, and in maths, one in four results were level 9.</p> <aside class=\"element element-rich-link element--thumbnail\"> <p> <span>Related: </span><a href=\"https://www.theguardian.com/education/2016/dec/30/no-excuses-inside-britains-strictest-school\">'No excuses': inside Britain's strictest school</a> </p> </aside>  <p>Birbalsingh’s Twitter feed documented her morning – the girl who got straight 9s, the boy who used to be badly behaved but did brilliantly, the disbelief of another pupil as he read, and reread, his results – “Miss, these can’t be real” – the staff celebration.</p> <p>In a subsequent interview with the Guardian, Birbalsingh could not disguise her delight. “It’s really great. When you think all of our kids are from the inner city, they are from challenging backgrounds, they are deprived kids. I don’t have any white, middle-class kids in the school.”</p> <p>Birbalsingh first attracted controversy when, as deputy head at a school in south London, she criticised school behaviour policies in a <a href=\"https://www.theguardian.com/education/2010/oct/26/katharine-birbalsingh-tory-teacher-interview\">high-profile speech</a> to the Conservative party conference in 2010. The speech alienated many in the teaching profession and she was left shaken and jobless.</p> <p>It has been a long haul since then. Another tweet described her journey:</p>  <figure class=\"element element-tweet\" data-canonical-url=\"https://twitter.com/Miss_Snuffy/status/1164223698871771137\">  <blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">1. Told you will never work in the state sector again. <br><br>2. 3 years fighting detractors to set up a free school, call it Michaela. <br><br>3. 5 years with an amazing team, transforming kids’ lives &amp; fighting the good fight every day!<br><br>4. Thursday August 22: GCSE results finally here 🥳 <a href=\"https://t.co/u2DecBt6UN\">pic.twitter.com/u2DecBt6UN</a></p>&mdash; Katharine Birbalsingh (@Miss_Snuffy) <a href=\"https://twitter.com/Miss_Snuffy/status/1164223698871771137?ref_src=twsrc%5Etfw\">August 21, 2019</a></blockquote>  </figure>  <p>Ever since it <a href=\"https://www.theguardian.com/education/2014/sep/05/katharine-birbalsingh-regret-telling-tories-education-system-broken\">opened</a> in a converted office block close to Wembley football stadium in September 2014, Michaela has been the subject of intense scrutiny and debate, particularly over its <a href=\"https://www.theguardian.com/education/2016/dec/30/no-excuses-inside-britains-strictest-school\">tough behaviour policy</a>.</p> <p>Pupils are given demerits or detention for forgetting to bring a pencil or pen, or for talking in corridors when moving between lessons. The school hit the headlines again when it was reported that children whose parents had failed to pay for their lunches <a href=\"https://www.theguardian.com/education/2016/jul/29/headteacher-defends-policy-of-putting-pupils-in-lunch-isolation\">were made to eat separately</a> from their classmates.</p> <aside class=\"element element-rich-link element--thumbnail\"> <p> <span>Related: </span><a href=\"https://www.theguardian.com/education/2019/aug/22/closing-the-gcse-attainment-gap-cant-be-up-to-schools-alone\">Closing the GCSE attainment gap can’t be up to schools alone | Letters</a> </p> </aside>  <p>“I think it’s hilarious to say we are the strictest school in Britain,” laughed Birbalsingh. “It’s a joyful and happy place. The children are so happy to be here.” Two years ago, the schools’ watchdog Ofsted vindicated her approach when it judged Michaela outstanding in all categories. A second school, following the same model, has been approved and will open in Stevenage in Hertfordshire.</p> <p>Birbalsingh puts Michaela’s success down to “conservative values – with a small c”. She lists them – belief in personal responsibility, respect for authority and a sense of duty towards others. “I’ve always known the school is great, because I’m here every day and the children are wonderful. What I’m most proud of is the young adults they’ve become. They are good people.”</p>",
  "body": "<p>Get set for peak Peaky Blinders as the return of the cult gangster drama heralds a global expansion, from a dapper clothing range backed by David Beckham to books, video games and its own two-day festival.</p> \n<p>The eagerly awaited fifth series of the Birmingham-set show returns on Sunday, making its debut on BBC1, the country’s most-watched channel – a testament to its elevation to crown jewel status alongside the corporation’s biggest returning dramas such as Line of Duty.</p> \n<p>The exploits of the Shelby family – under their leader, Tommy, played by Cillian Murphy – have proven to be a global hit, with a Netflix deal making the show available in more than 180 countries.</p> \n<aside class=\"element element-pullquote element--supporting\"> \n <blockquote> \n  <p>I’ve had A-list celebrities and rock stars get in touch to say how much they love it</p> \n  <footer> \n   <cite>Creator Steven Knight</cite> \n  </footer> \n </blockquote> \n</aside> \n<p>“It began with an incredible response in the UK and now all over the world,” says Steven Knight, the Birmingham-born creator and writer of Peaky Blinders. “I talked to someone recently who had been in Panama City and a barman told him he was saving enough money to come to Birmingham to see the streets where Peaky Blinders happened. I’ve had A-list celebrities and rock stars get in touch to say how much they love it.”</p> \n<p>In fact, it was a knock on the door by one celebrity fan, David Beckham, that resulted in a partnership for an <a href=\"x-gu://item/mobile.guardianapis.com/uk/items/fashion/2019/jan/06/david-beckhams-menswear-label-doffs-cap-peaky-blinders-kent-curwen\">official range of Peaky Blinders-inspired clothing</a>. The line is from Kent &amp; Curwen, the fashion label co-owned by Beckham, and will debut in its chain of more than 160 stores globally from October as well as being made available online.</p> \n<p>“David is a big fan, so is his son, and they approached us and said they wanted to do a Peaky Blinders capsule range,” Knight says.</p> \n<p>He says that despite the growing popularity of the show, historically there had not been a focus on fostering the development of the brand beyond TV. “By the end of series four it became very obvious around the world there was a thing happening,” he says. “That is when we started looking at a full range of products.”</p> \n<p>The first official online store opened in June, offering “fan-based apparel” such as T-shirts and hoodies; in October, Superdrug will unveil a men’s grooming range and there will be an international launch of a Peaky Blinders book; and by Christmas there could even by a Peaky fragrance to go with the official 2020 calendar. Next year, virtual reality and console games will be launched, where players can “be a Peaky Blinder”, and talks about a smartphone version are in the works.</p> \n<figure class=\"element element-image\" data-media-id=\"6be5eea5d34e046e42fe2d4e6fa36f16389df4de\"> \n <img src=\"https://media.guim.co.uk/6be5eea5d34e046e42fe2d4e6fa36f16389df4de/790_304_3477_2086/1000.jpg\" alt=\"Helen McCrory as Polly Gray in Peaky Blinders.\" width=\"1000\" height=\"600\" class=\"gu-image\"> \n <figcaption> \n  <span class=\"element-image__caption\">Helen McCrory as Polly Gray in Peaky Blinders.</span> \n  <span class=\"element-image__credit\">Photograph: Ben Blackall/BBC/Caryn Mandabach Productions Ltd</span> \n </figcaption> \n</figure> \n<p>The move to top billing on primetime BBC1 will give Peaky Blinders an extra boost among UK audiences of at least 50% beyond its old home on BBC2, providing the perfect marketing springboard to fuel the ambitious commercial expansion of the brand. </p> \n<p>A near-two-year wait for a new series has served to raise the excitement level among fans. In July, more than 76,000 people applied for tickets to the first exclusive screening of the season five premiere held in Birmingham town hall. </p> \n<p>Knight is using his hometown to launch the <a href=\"https://blog.ticketmaster.co.uk/music/peaky-blinders-festival-46191/\">first official Peaky Blinders festival</a> next month, with two days of music, fashion, street food – and even a “bespoke ballet Rambert performance” – in the Digbeth and Small Heath areas of Birmingham, where the original gang were based. </p> \n<aside class=\"element element-rich-link element--thumbnail\"> \n <p> <span>Related: </span><a href=\"x-gu://item/mobile.guardianapis.com/uk/items/fashion/2019/jan/06/david-beckhams-menswear-label-doffs-cap-peaky-blinders-kent-curwen\">David Beckham's menswear label doffs cap to Peaky Blinders</a> </p> \n</aside> \n<p>While it is full steam ahead on the commercialisation front, there is a certain irony that the makers of a TV show about a gangster family seeking to outwit rivals have found themselves exploited by those looking to tap into the Peaky Blinders effect.</p> \n<p>Less than two months after the first series debuted on BBC2, a Leamington Spa-based company called Chaos Brothers filed to officially trademark “Peaky Blinders” for use selling the peaked caps made famous by the show. It sells them through a Peaky Blinders-trademarked website.</p> \n<p>In early 2014, during the run-up to series two, Sadler’s Ales, based in Stourbridge, launched a Peaky Blinder beer <a href=\"https://www.birminghammail.co.uk/news/midlands-news/sadlers-ales-launches-peaky-blinders-6907399\">citing the show as inspiration</a>. It uses images of the original gang and has since expanded to include gin, whisky and rum and a “fan pack” offering a flat cap and razor pin. In 2017, the company registered “Peaky Blinder” as its official trademark in the beer and spirits category.</p> \n<p>“[The TV show makers] couldn’t release a Peaky Blinder gin as that would encroach on our intellectual property,” says Chris Dew, the marketing manager at Sadler’s Brewery. “Initially, we were celebrated by the show; there were shots of the cast drinking the beer. But as time has gone on and the show has got bigger we have disassociated from each other to stay in our lanes.”</p> \n<aside class=\"element element-pullquote element--supporting\"> \n <blockquote> \n  <p>Our trademark system is what is known as a first-to-file system</p> \n  <footer> \n   <cite>Lawyer Iain Connor</cite> \n  </footer> \n </blockquote> \n</aside> \n<p>Ironically, early last year when the show’s makers made an attempt to trademark the Peaky Blinders name in 10 categories of products, it was opposed by Chaos Brothers and Halewood International, <a href=\"https://halewood-int.com/our-business/breweries/sadlers-brewery/\">which owns Sadler’s Brewery</a> and also Windsor Castle Brewery, which has a “Peaky” beer. The issue remains mired at the European International Property Office.</p> \n<p>“Our trademark system is what is known as a first-to-file system,” says Iain Connor, a lawyer with Pinsent Masons. “If you get there first you have the rights. It seems obvious to register a trademark [beyond TV] but you don’t know if you have a hit show on your hands; everyone misses the boat as it is often last on the list.”</p> \n<p>Jane Smith, the group director of licensing and gaming at Endemol Shine, which handles the Peaky Blinders business, says that because the show is based on a true story it cannot nail down all the rights.</p> \n<p>“We work very hard on registering trademarks and in terms of infringements we are very active,” she says. “We know there were people ahead of us. We have had conversations about how to resolve issues and coexist. Never do they touch the TV series, that is our red line.”</p> \n<figure class=\"element element-atom\" data-atom-id=\"a1d2d12c-ae47-4fc3-9ff1-8a9633f2f40c\" data-atom-type=\"guide\"> \n <details data-snippet-id=\"a1d2d12c-ae47-4fc3-9ff1-8a9633f2f40c\" data-snippet-type=\"guide\" class=\"atom atom--snippet atom--snippet--guide\"> \n  <summary class=\"atom--snippet__header\"> <span class=\"atom--snippet__label\">Quick guide</span> <h4 class=\"atom--snippet__headline\">Peaky Blinders: all our episode-by-episode recaps</h4> <button class=\"atom__button atom__button--large atom__button--rounded atom--snippet__handle\" aria-hidden=\"true\"> <span class=\"is-on\">\n     <svg class=\"icon icon--plus \" width=\"18px\" height=\"18px\" viewbox=\"0 0 18 18\"> \n      <path d=\"M8.2 0h1.6l.4 7.8 7.8.4v1.6l-7.8.4-.4 7.8H8.2l-.4-7.8L0 9.8V8.2l7.8-.4.4-7.8z\" /> \n     </svg> Show</span> <span class=\"is-off\">\n     <svg class=\"icon icon--minus \" width=\"32px\" height=\"32px\" viewbox=\"0 0 32 32\"> \n      <rect x=\"5\" y=\"15\" width=\"22\" height=\"3\"></rect> \n     </svg> Hide</span> </button> </summary> \n  <div class=\"atom--snippet__body\"> \n   <div class=\"atom--snippet__item\"> \n    <div class=\"atom--snippet__heading\">\n     <b>Series 4</b>\n    </div> \n    <p><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2017/nov/15/peaky-blinders-recap-series-four-episode-one-the-noose\">Episode 1: The Noose</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2017/nov/22/peaky-blinders-recap-series-four-episode-two-heathens\">Episode 2: Heathens</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2017/nov/29/peaky-blinders-recap-series-4-episode-3-blackbird\">Episode 3: Blackbird</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2017/dec/07/peaky-blinders-recap-series-4-episode-4-dangerous\">Episode 4: Dangerous</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2017/dec/13/peaky-blinders-recap-series-4-episode-4-the-duel\">Episode 5: The Duel</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2017/dec/20/peaky-blinders-recap-series-4-episode-6-the-company\">Episode 6: The Company</a></p> \n   </div> \n   <div class=\"atom--snippet__item\"> \n    <div class=\"atom--snippet__heading\">\n     <b>Series 3</b>\n    </div> \n    <p><a href=\"https://www.theguardian.com/tv-and-radio/2016/may/05/peaky-blinders-recap-series-three-episode-one-welcome-back-boys\">Episode 1</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2016/may/12/peaky-blinders-recap-series-three-episode-two-enter-paddy-considine-the-creep\">Episode 2</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2016/may/19/peaky-blinders-recap-series-three-episode-three-say-no-to-torture-tommy\">Episode 3</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2016/may/26/peaky-blinders-recap-series-three-episode-four-sickeningly-good\">Episode 4</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2016/jun/02/peaky-blinders-recap-series-three-episode-five-of-course-there-was-a-candle-lit-orgy\">Episode 5</a><br><a href=\"https://www.theguardian.com/tv-and-radio/2016/jun/09/peaky-blinders-series-three-finale-recap-a-brilliant-bittersweet-nail-biter\">Episode 6</a></p> \n   </div> \n   <div class=\"atom--snippet__item\"> \n    <div class=\"atom--snippet__heading\">\n     <b>Series 2</b>\n    </div> \n    <p><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/oct/02/peaky-blinders-recap-series-two-episode-one-style-swagger-and-a-violent-trip-to-london\">Episode 1</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/oct/09/peaky-blinders-recap-series-two-episode-two-tommy-shelby\">Episode 2</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/oct/16/peaky-blinders-recap-series-two-episode-three-a-strong-brutal-hour\">Episode 3</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/oct/23/peaky-blinders-recap-series-two-episode-four-sex-sabini-and-solomons\">Episode 4</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/oct/30/peaky-blinders-recap-series-two-episode-five-enthralling-yet-infuriating\">Episode 5</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2014/nov/06/peaky-blinders-recap-series-two-episode-six-what-a-finale\">Episode 6</a></p> \n   </div> \n   <div class=\"atom--snippet__item\"> \n    <div class=\"atom--snippet__heading\">\n     <b>Series 1</b>\n    </div> \n    <p><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/sep/12/peaky-blinders-recap-episode-one\">Episode 1</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/sep/19/peaky-blinders-recap-episode-two\">Episode 2</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/sep/26/peaky-blinders-racap-episode-three\">Episode 3</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/oct/03/peaky-blinders-recap-episode-four\">Episode 4</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/oct/10/peaky-blinders-recap-episode-five\">Episode 5</a><br><a href=\"https://www.theguardian.com/tv-and-radio/tvandradioblog/2013/oct/17/peaky-blinders-recap-episode-six\">Episode 6</a></p> \n   </div> \n  </div> \n  <footer class=\"atom--snippet__footer\"> \n   <div class=\"atom--snippet__feedback\"> \n    <div>\n     Was this helpful?\n    </div> \n    <button class=\"atom__button atom__button--round\" value=\"like\" aria-label=\"Yes\">\n     <svg class=\"icon icon--thumb \" width=\"40px\" height=\"40px\" viewbox=\"0 0 40 40\"> \n      <path fill=\"#FFF\" d=\"M33.78 22.437l-4.228 13.98L27.93 37.5 5.062 34.14V15.503l7.8-1.517L24.354 2.5h1.624L28.9 5.426l-4.548 8.67h.107l10.477 1.31\"></path> \n     </svg></button> \n    <button class=\"atom__button atom__button--round\" value=\"dislike\" aria-label=\"No\">\n     <svg class=\"icon icon--thumb \" width=\"40px\" height=\"40px\" viewbox=\"0 0 40 40\"> \n      <path fill=\"#FFF\" d=\"M33.78 22.437l-4.228 13.98L27.93 37.5 5.062 34.14V15.503l7.8-1.517L24.354 2.5h1.624L28.9 5.426l-4.548 8.67h.107l10.477 1.31\"></path> \n     </svg></button> \n   </div> \n   <div class=\"atom--snippet__ack\" hidden aria-role=\"alert\" aria-live=\"polite\">\n     Thank you for your feedback. \n   </div> \n  </footer> \n </details> \n</figure> \n<p>Earlier this year, a Manchester bar called Peaky Blinders was warned that it was infringing the show’s copyright. A manager at the bar said it took down images from the show it had on the walls. However, a <a href=\"https://www.google.com/search?q=peaky+blinders+manchester&amp;oq=peaky+blinders+manchester&amp;aqs=chrome..69i57j0l2j69i61j69i60l2.4133j0j4&amp;sourceid=chrome&amp;ie=UTF-8\">Google search still retains an image of the bar as it was</a> – complete with a floor-to-ceiling image of Cillian Murphy’s character smoking a cigarette.</p> \n<p>With Peaky Blinders fever continuing to mount, where does Knight think he can take his creation next; the big screen perhaps?</p> \n<p>“I think everybody would be in,” Knight says. “I think wait until we have done seven series, then I think it would be very tempting to put it on the big screen. A one-off event that happens to the Shelby family that we make into a feature.”</p>",
  "tags": [
    {
      "webTitle": "Venezuela",
      "webUrl": "https://www.theguardian.com/world/venezuela"
    },
    {
      "webTitle": "Nicolás Maduro",
      "webUrl": "https://www.theguardian.com/world/nicolas-maduro"
    },
    {
      "webTitle": "Americas",
      "webUrl": "https://www.theguardian.com/world/americas"
    }
  ],
  "pillarId": "pillar/news",
  "pillarName": "News",
  "displayImages": [
    {
      "urlTemplate": "https://i.guim.co.uk/img/media/90870ec12d9cb8af47d20a76457c9538e418ad78/0_0_3500_2101/master/3500.jpg?w=2101&h=3500&q=85&fit=bounds&sig-ignores-params=true&s=c31d8fb40c8a1bcfaf510a6407ba5334",
      "height": 2101,
      "width": 3500,
      "caption": "Venezuela’s president Nicolas Maduro with national assembly chief Diosdado Cabello, who has reportedly been speaking to Trump advisers. Photograph: Photograph: Manaure Quintero/Reuters",
      "credit": "Manaure Quintero/Reuters",
      "altText": "Venezuela’s president Nicolas Maduro with national assembly chief Diosdado Cabello, who has reportedly been speaking to Trump advisers.",
      "cleanCaption": "Venezuela’s president Nicolas Maduro with national assembly chief Diosdado Cabello, who has reportedly been speaking to Trump advisers.",
      "cleanCredit": "Photograph: Manaure Quintero/Reuters"
    }
  ]
}

app.get('/', (req, res) => {
    try {
        fs.readFile(path.resolve('./src/html/articleTemplate.html'), 'utf8', (err, data) => {
            if (err) {
              console.error(err)
              return res.status(500).send('An error occurred')
            }
            
            const body = renderToString(React.createElement(Article, capiFields));

            return res.send(
              data.replace(
                '<div id="root"></div>',
                `<div id="root">${body}</div>`
              )
            )
          })
    } catch (e) {
        res.status(500).send(`<pre>${e.stack}</pre>`);
    }
});

app.use((err: any, req: any, res: any, next: any) => {
    res.status(500).send(`<pre>${err.stack}</pre>`);
});

app.listen(3040);
